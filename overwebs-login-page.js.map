{"version":3,"sources":["overwebs-login-page.js"],"names":["GluonElement","html","OverwebsLoginPage","template","constructor","loginValid","connectedCallback","$","input","addEventListener","_inputChanged","form","preventDefault","_login","_anonymous","value","validity","valid","dispatchEvent","CustomEvent","detail","anonymous","split","userName","battleTag","loginButton","setAttribute","anonymousButton","removeAttribute","customElements","define","is"],"mappings":"AAAA,OAASA,YAAT,CAAuBC,IAAvB,KAAmC,qBAAnC,CACA,MAAO,uCAAP,CACA,MAAO,qCAAP,CAEA,KAAMC,kBAAN,QAAgCF,aAAa,CAC3C,GAAIG,SAAJ,EAAe,CAEb,MAAOF,KAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KA0Db,CAEDG,aAAc,CACZ,OADY,CAEZ,KAAKC,UAAL,GACD,CAEDC,mBAAoB,CAClB,MAAMA,iBAAN,EADkB,CAElB,KAAKC,CAAL,CAAOC,KAAP,CAAaC,gBAAb,CAA8B,OAA9B,CAAuC,IAAM,KAAKC,aAAL,EAA7C,CAFkB,CAIlB,KAAKH,CAAL,CAAOI,IAAP,CAAYF,gBAAZ,CAA6B,QAA7B,CAAuC,KAAK,CAC1C,EAAEG,cAAF,EAD0C,CAE1C,KAAKC,MAAL,EACD,CAHD,CAID,CAED,GAAIC,WAAJ,EAAiB,CACf,MAA8B,EAAvB,QAAKP,CAAL,CAAOC,KAAP,CAAaO,KAAb,EAA6B,CAAC,KAAKR,CAAL,CAAOC,KAAP,CAAaQ,QAAb,CAAsBC,KAC5D,CAEDJ,QAAS,CACP,GAAI,KAAKC,UAAT,CACE,KAAKI,aAAL,CAAmB,GAAIC,YAAJ,CAAgB,OAAhB,CAAyB,CAAEC,OAAQ,CAAEC,YAAF,CAAV,CAAzB,CAAnB,CADF,KAEO,CACL,GAAI,MAAwB,KAAKd,CAAL,CAAOC,KAAP,CAAaO,KAAb,CAAmBO,KAAnB,CAAyB,GAAzB,CAA5B,CACA,KAAKJ,aAAL,CAAmB,GAAIC,YAAJ,CAAgB,OAAhB,CAAyB,CAAEC,OAAQ,CAAEG,UAAF,CAAsBC,UAAY,GAAD,CAAY,IAAZ,CAAyB,EAA1D,CAAV,CAAzB,CAAnB,CACD,CACF,CAEDd,eAAgB,CACV,KAAKI,UADK,EAEZ,KAAKP,CAAL,CAAOkB,WAAP,CAAmBC,YAAnB,CAAgC,UAAhC,CAA4C,EAA5C,CAFY,CAGZ,KAAKnB,CAAL,CAAOoB,eAAP,CAAuBC,eAAvB,CAAuC,UAAvC,CAHY,GAKZ,KAAKrB,CAAL,CAAOkB,WAAP,CAAmBG,eAAnB,CAAmC,UAAnC,CALY,CAMZ,KAAKrB,CAAL,CAAOoB,eAAP,CAAuBD,YAAvB,CAAoC,UAApC,CAAgD,EAAhD,CANY,CAQf,CAnG0C,CAsG7CG,eAAeC,MAAf,CAAsB5B,kBAAkB6B,EAAxC,CAA4C7B,iBAA5C,C","file":"overwebs-login-page.js","sourcesContent":["import { GluonElement, html } from '../gluonjs/gluon.js';\nimport '../overwebs-button/overwebs-button.js';\nimport '../overwebs-fonts/overwebs-fonts.js';\n\nclass OverwebsLoginPage extends GluonElement {\n  get template() {\n    // TODO: Migrate to --overwebs-window-size\n    return html`\n    <style>\n    :host {\n      display: flex;\n      flex-flow: column;\n      position: relative;\n      overflow: auto;\n      width: 100vw;\n      height: 100vh;\n      align-items: center;\n      justify-content: flex-end;\n      letter-spacing: calc(1 / 2560 * var(--overwebs-window-size, 1920px));\n    }\n    #form {\n      width: calc(400 / 2560 * var(--overwebs-window-size, 1920px));\n      display: flex;\n      flex-flow: column;\n      margin-bottom: calc(88 / 2560 * var(--overwebs-window-size, 1920px));\n    }\n    label {\n      margin-bottom: calc(14 / 2560 * var(--overwebs-window-size, 1920px));\n      font-family: overwebs-futura;\n      font-size: calc(24 / 2560 * var(--overwebs-window-size, 1920px));\n      color: #FFFFFF;\n      text-align: center;\n      text-transform: uppercase;\n      pointer-events: none;\n    }\n    #input {\n      height: calc(66 / 2560 * var(--overwebs-window-size, 1920px));\n      margin-bottom: calc(47 / 2560 * var(--overwebs-window-size, 1920px));\n      background: #D1D1D4;\n      border-radius: calc(9 / 2560 * var(--overwebs-window-size, 1920px));\n      border: none;\n      text-align: center;\n      font-family: overwebs-futura;\n      font-size: calc(28 / 2560 * var(--overwebs-window-size, 1920px));\n      transition: background-color linear 0.08s;\n      box-shadow: inset 0 0 calc(1 / 2560 * var(--overwebs-window-size, 1920px)) calc(2 / 2560 * var(--overwebs-window-size, 1920px)) #FFFFFF;\n    }\n    #input:hover, #input:focus {\n      background: #FFFFFF;\n    }\n    #input:focus {\n      outline: none;\n      box-shadow: inset 0 0 calc(1 / 2560 * var(--overwebs-window-size, 1920px)) calc(2 / 2560 * var(--overwebs-window-size, 1920px)) #FFFFFF, 0 0 0 calc(1 / 2560 * var(--overwebs-window-size, 1920px)) #FFFFFF;\n    }\n    #loginButton {\n      margin-bottom: calc(47 / 2560 * var(--overwebs-window-size, 1920px));\n    }\n    </style>\n    <form id=\"form\" action=\"/main\" method=\"get\">\n      <label for=\"input\">Username</label>\n      <input type=\"text\" id=\"input\" pattern=\"^[a-zA-Z]+(#[0-9]+)?$\" autofocus></input>\n      <overwebs-button block big bigtext yellow id=\"loginButton\" disabled><button type=\"submit\">Login</button></overwebs-button>\n      <overwebs-button block big bigtext yellow id=\"anonymousButton\"><button type=\"submit\">Anonymous</button></overwebs-button>\n    </form>\n    `;\n  }\n\n  constructor() {\n    super();\n    this.loginValid = false;\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.$.input.addEventListener('input', () => this._inputChanged());\n\n    this.$.form.addEventListener('submit', e => {\n      e.preventDefault();\n      this._login();\n    });\n  }\n\n  get _anonymous() {\n    return this.$.input.value === '' || !this.$.input.validity.valid;\n  }\n\n  _login() {\n    if (this._anonymous) {\n      this.dispatchEvent(new CustomEvent('login', { detail: { anonymous: true } }));\n    } else {\n      let [userName, battleTag] = this.$.input.value.split('#');\n      this.dispatchEvent(new CustomEvent('login', { detail: { userName: userName, battleTag: `${userName}#${battleTag}` } }));\n    }\n  }\n\n  _inputChanged() {\n    if (this._anonymous) {\n      this.$.loginButton.setAttribute('disabled', '');\n      this.$.anonymousButton.removeAttribute('disabled');\n    } else {\n      this.$.loginButton.removeAttribute('disabled');\n      this.$.anonymousButton.setAttribute('disabled', '');\n    }\n  }\n}\n\ncustomElements.define(OverwebsLoginPage.is, OverwebsLoginPage);\n"]}